/*! Franky v1.0.11 | (c) 2014 Kondrat Shmoylov */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a):b(a)}("undefined"!=typeof global?global:this,function(a){var b=function(a){};if(b.version="1.0.11",b.isDebug=!1,b.isArray=function(a){return a instanceof Array},b.isArrayLike=function(a){return b.isObject(a)&&!b.isArray(a)&&"length"in a},b.isElement=function(a){try{return a instanceof HTMLElement}catch(b){return"object"==typeof a&&1===a.nodeType&&"object"==typeof a.style&&"object"==typeof a.ownerDocument}},b.isFunction=function(){return Array.prototype.every.call(arguments,function(a){return a instanceof Function})},b.isObject=function(a){return"object"==typeof a},b.isString=function(){return Array.prototype.every.call(arguments,function(a){return"string"==typeof a})},b.stringf=function(a,b){var c=Array.prototype.slice.call(arguments,1);return a.replace(/%s/g,function(){return c.shift()||""})},"undefined"==typeof JSON)throw new Error("JSON is not supported");b.JSON=JSON,b.console={slog:function(a){this.log(b.stringf.apply(this,arguments))},log:function(b){"undefined"!=typeof debug?debug(b):a.console&&a.console.log&&a.console.log(b)},error:function(a){throw new Error(a)},dir:function(a){this.log(b.JSON.stringify(a))}},b.log=b.console.log,b.error=b.console.error;var c=/^https?:\/\/\S+/i;b.isURL=function(a){return"string"!=typeof a&&b.error("isURL expects string parameter instead "+typeof a),c.test(a)};var d=Array.prototype.filter?function(a,b){return a.filter(b)}:function(a,c){var d=[];return b.each(a,function(a,b){c(a,b,this)&&d.push(a)}),d};b.filter=function(a,c){return b.isArray(a)||b.error("first argument is expected to be an array instead of "+typeof a),b.isFunction(c)||b.error("second argument is expected to be a function instead of "+typeof c),d(a,c)},b.forEach=function(a,b,c){var d,e;for(c=c||a,d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);return this},b.indexOf=function(a,b,c){if(c=c||0,!(a instanceof Array))throw new Error("Function expects array as first argument");if("indexOf"in Array.prototype)return a.indexOf(b,c);for(var d=0,e=a.length;e>d;d++)if(a[d]===b&&d>=c)return d;return-1},b.map=function(a,c){var d=[];return b.isArray(a)&&c instanceof Function&&(d=a.map(c)),d},function(){var a=Array.prototype.some?function(a,b){return a.some(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(b(a[c],c,a))return!0;return!1};b.some=function(c,d){return b.isArray(c)||b.error("first argument is expected to be an array instead of "+typeof c),b.isFunction(d)||b.error("second argument is expected to be a function instead of "+typeof d),a(c,d)}}();var e={};b.each=e.each=function(a,c,d){if(b.isArray(a))b.forEach.apply(this,arguments);else{var e;d=d||a;for(e in a)a.hasOwnProperty(e)&&c.call(d,a[e],e,a)}return this},b.beget=function(a,c){var d={},e,f=typeof a,g=typeof c;if("object"!==f&&b.error("Only object allowed to be prototype and tried to work with "+f),"undefined"!==g&&"object"!==g&&b.error("Only object allowed to be list of properties instead "+g),"function"==typeof Object.create)e={},b.each(c,function(a,b){e[b]={writable:!0,enumerable:!0,value:a}}),d=Object.create(a,e);else{var h=function(){};a&&"object"==typeof a&&(h.prototype=a),e=new h,"undefined"!=typeof c&&b.each(c,function(a,b){e[b]=a}),d=e}return d},b.getRandom=function(a){return parseInt(Math.random()*(a||1e3))},b.getElementId=function(a){b.isElement(a)||b.error("nodeElement expected as first argument instead of "+typeof a);var c=a.getAttribute("id");return c||(c="_"+b.getRandom(1e16),a.setAttribute("id",c)),c};var f=function(a){for(var b=document.all,c=[],d=0,e=b.length;e>d;++d)"string"==typeof b[d].getAttribute(a)&&c.push(b[d]);return c};b.getElementsByAttr=function(b){var c=[],d=arguments[1]||a.document||null;if("getAttribute"in d&&d.getAttribute(b)&&c.push(d),d&&d.querySelectorAll)try{c=c.concat(Array.prototype.slice.call(d.querySelectorAll("["+b+"]")))}catch(e){}return c.length||(c=c.concat(f(b))),c};var g=(new RegExp).compile(/^\s+|\s+$/g);b.trim=function(a){var c=typeof a;return"string"!==c&&b.error("Argument must be string but"+c+" passed"),a.trim instanceof Function?a.trim():a.replace(g,"")},b.stripSpaces=function(a){return a.split(" ").join("")},b.getJPathValue=function(a,b){var c=a,d=b.split("."),e=0;while(c[d[e]])c=c[d[e++]];return c},b.getObject=function(a){return a.beget=function(a){return b.beget(this,a)},b.beget(a)},b.create=function(a){var b=function(){};return b.prototype=a,new b},b.constructURL=function(a,b){var c="",d=[],e,f=a.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),g=f&&f[3]?f[3]:"";if(f&&f[2]){var h=f[2].split("&"),i=h.length;while(i--)d.push(h[i])}for(e in b)b.hasOwnProperty(e)&&d.push(e+"="+b[e]);return c=f?f[1]+"?"+d.join("&")+g:a+"?"+d.join("&")+g},b.data=function(a,c){return b.isElement(a)||b.error("nodeElement expected as first argument instead of "+typeof a),a.getAttribute("data-"+c)},b.ComponentBase={data:function(a){var c=this.element;return c?b.data(c,a):void 0},setId:function(a){return this.id=a,this},baseInit:function(a,c){var d=this;this.element=c,b.each(b.dataset(c),function(a,b){d[b]=a})}},b.Component=function(){var a=[],c=[],d={},e="data-xapp";return{extend:function(e){var f=a.length,g;if(b.isObject(e))g=b.beget(b.ComponentBase,e);else if(b.isString(e)&&b.isFunction(arguments[1]))g=b.beget(b.ComponentBase,{id:e,init:arguments[1]});else{if(!b.isString(e)||!b.isArray(arguments[1]))throw new Error('Unknown definition structure, try to use extend("yourName", function() { ... init code ... })');var h=arguments[1];g=b.beget(b.ComponentBase,{id:e,init:function(){var a=b.filter(h,function(a){return b.isString(a)});a=b.map(a,function(a){if(!c[a])throw new Error("Service "+a+" hasnt defined");return c[a]()});var d=b.filter(h,function(a){return b.isFunction(a)});if(d.length>1)throw new Error("Too much declaration functions");d[0].apply(this,a)}})}return g.id||b.error("extend method expects id field in description object"),a.push(g),d[g.id]=f,a[f]},factory:function(a,b){c[a]=b},initByHTML:function(a){var c=a||document,d=this,f=b.getElementsByAttr(e,c);return b.forEach(f,function(a){var c=b.data(a,"xapp");b.forEach(c.split(" "),function(c){d.initById(c,b.getElementId(a),a)})}),this},initById:function(b,c,e){var f=b in d?a[d[b]]:null;f&&("undefined"!=typeof c&&f.setId(c),f.baseInit(c,e),f.init(c))}}}(),b.dataset=function(a){var c={};return b.isElement(a)&&(a.dataset?c=a.dataset:b.forEach(a.attributes,function(a){0===a.name.indexOf("data-")&&(c[a.name.substr(5)]=a.value)})),c},b.generateId=function(){return String(Math.random()).substr(2)},b.ns=function(a,b,c){return a[b]||(a[b]={}),"undefined"!=typeof c&&c.call(a[b]),this},b.extend=function(a,b){var c=function(){};a.superclass=c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b)},b.Interface=function(a,c){var d=this;2!==arguments.length&&b.error("Interface constructor called with "+arguments.length+"parameters, but expected exactly 2"),this.methods=[],this.name=a,b.forEach(c,function(a){"string"!=typeof a&&b.error("Interface constructor expects method names to be passed in as a string"),d.methods.push(a)})},b.Interface.ensureImplements=function(a,c){return 2!==arguments.length&&b.error("Interface constructor called with "+arguments.length+"parameters, but expected at least 2"),b.forEach(c,function(c){c.constructor!==b.Interface&&b.error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface."),b.forEach(c.methods,function(d){a[d]&&"function"==typeof a[d]||b.error("Function Interface.ensureImplements: object does not implement the "+c.name+" interface. Method "+d+" was not found.")})}),!0},b.View=function(a){this.templates=a&&a.templates?b.beget(a.templates):{}},b.isString=function(){return Array.prototype.every.call(arguments,function(a){return"string"==typeof a})},b.View.prototype={templates:{},re:{parse:/\[\%\s+([^%]+)\s+\%\]/g,rule:/:/},setParseRe:function(a){this.re.parse=a},getCustomRender:function(){var a="undefined"!==arguments[0]?arguments[0].split(this.re.rule):null;return a&&2===a.length?this.parseRules[a[0]]&&this.parseRules[a[0]].call(this,a[1]):void 0},parseRules:{l10n:function(a){return function(c){return b.isDebug&&!c.l10n(a)&&b.console.error("There is no translation for "+a),c.l10n?c.l10n(a):a}},jpath:function(a){return function(c){return b.getJPathValue(c,a)||""}},view:function(a){var b=this;return function(c){return b.get(a,c)}}},ruleFunction:function(a,c,d){var e=this;return this.getCustomRender(a)||function(f){var g=f&&f[a]||f&&f.views&&f.views.get(a,f)||"";return g||(g=d[a]?e.getContent(d[a],f):c?c[a]:""),b.isDebug&&!g&&b.console.log("Undefined variable "+a),g||""}},getContent:function(a,c){var d="";return d=b.isArray(a)?b.map(a,function(a){return"string"==typeof a?a:a(c)}).join(""):b.isFunction(a)?a(c):a.toString()},get:function(a,b){var c=this,d=b&&b.views?b.views.templates[a]:this.templates[a];return c.getContent(d,b)}},b.View.prototype.let=function(a,c,d){var e=this.templates[a]=[],f=this,g=0;return b.isFunction(c)?e.push(c):(c.replace(this.re.parse,function(a,b,h){e.push(c.substr(g,h-g),f.ruleFunction(b,d,f.templates)),g=h+a.length}),g<c.length&&e.push(c.substr(g))),this},b.views=new b.View,b.toArray=function(a){return Array.prototype.slice.call(a)};var h={},i={};return b.amd={define:function(a,b,c){return c=c||!0,h[a]=b,c&&(i[a]=!0),this},require:function(){var a=b.toArray(arguments).slice(0,arguments.length-1),c=arguments[arguments.length-1];return a=b.map(a,function(a){if(!h[a])throw new Error("Unmet dependency:"+a);return i[a]?(h[a]=b.isFunction(h[a])?h[a]():h[a],h[a]):h[a]()}),c.apply(this,a),this}},b.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},"function"==typeof define&&define.amd&&define("franky",[],function(){return b}),a.x=a.franky=b,b});
//# sourceMappingURL=franky.min.map